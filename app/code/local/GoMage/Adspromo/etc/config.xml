<?xml version="1.0"?>
<!--
 /**
 * GoMage Ads & Promo Extension
 *
 * @category     Extension
 * @copyright    Copyright (c) 2010-2015 GoMage (http://www.gomage.com)
 * @author       GoMage
 * @license      http://www.gomage.com/license-agreement/  Single domain license
 * @terms of use http://www.gomage.com/terms-of-use
 * @version      Release: 1.3
 * @since        Class available since Release 1.0
 */ 
 -->
<config>
    <modules>
        <GoMage_Adspromo>
            <version>1.3</version>
        </GoMage_Adspromo>
    </modules>
	<frontend>
        <routers>
            <gomage_adspromo>
                <use>standard</use>
                <args>
                    <module>GoMage_Adspromo</module>
                    <frontName>adspromo</frontName>
                </args>
            </gomage_adspromo>
        </routers>
        <layout>
            <updates>
                <gomage_adspromo module="gomage_adspromo">
                    <file>gomage-adspromo.xml</file>
                </gomage_adspromo>
            </updates>
        </layout>
    </frontend>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <gomage_adspromo before="Mage_Adminhtml">GoMage_Adspromo_Adminhtml</gomage_adspromo>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <adminhtml>
    	<translate>
			<modules>
				<GoMage_Adspromo>
					<files>
						<default>GoMage_Adspromo.csv</default>
					</files>
				</GoMage_Adspromo>
			</modules>
        </translate>
        <events>
            <cms_wysiwyg_config_prepare>
                <observers>
                    <gomage_adspromo_widget_observer>
                        <class>GoMage_Adspromo_Model_Observer</class>
                        <method>prepareWidgetsPluginConfig</method>
                    </gomage_adspromo_widget_observer>
                </observers>
            </cms_wysiwyg_config_prepare>
            <cms_wysiwyg_config_prepare>
                <observers>
                    <gomage_adspromo_variable_observer>
                        <class>GoMage_Adspromo_Model_Observer</class>
                        <method>prepareWysiwygPluginConfig</method>
                    </gomage_adspromo_variable_observer>
                </observers>
            </cms_wysiwyg_config_prepare> 
            <admin_system_config_changed_section_gomage_activation>
                <observers>
                    <adspromo_collect_totals_after>
                        <type>model</type>
                        <class>gomage_adspromo/observer</class>
                        <method>checkK</method>
                    </adspromo_collect_totals_after>
                </observers>
            </admin_system_config_changed_section_gomage_activation>
            <controller_action_predispatch>
                <observers>
                    <gomage_adspromo_notify>
                        <class>gomage_adspromo/observer_notify</class>
                        <method>notify</method>
                    </gomage_adspromo_notify>
                </observers>
            </controller_action_predispatch>
        </events> 
        <menu>
			<promo>
				<children>
					<gomage_adspromo> 
						<title>Ads &amp; Promo</title>
						<sort_order>30</sort_order>           
						<action>adminhtml/gomage_adspromo_items</action>
					</gomage_adspromo> 
				</children>
			</promo>
		</menu>         
        <layout>
            <updates>
                <gomage_adspromo>
                    <file>gomage-adspromo.xml</file>
                </gomage_adspromo>
            </updates>
        </layout>
        <acl>
	        <resources>
	            <admin>
	                <children>
	                    <system>
	                        <children>
	                            <config>
	                                <children>	                                    
	                                    <gomage_activation>
	                                    	<title>GoMage - Activation</title>
	                                    </gomage_activation>
                                        <gomage_notification>
	                                    	<title>GoMage - Notifications</title>
	                                    </gomage_notification>
	                                    <gomage_adspromo>
	                                    	<title>GoMage - Ads &amp; Promo</title>
	                                    </gomage_adspromo>
	                                </children>
	                            </config>
	                        </children>
	                    </system>
	                    <promo>
	                    	<children>
	                    		<gomage_adspromo>
                                	<title>Ads &amp; Promo</title>
                                </gomage_adspromo>
	                    	</children>	
	                    </promo>	
	                </children>
	            </admin>
	        </resources>
	    </acl>
	</adminhtml>
	<global>
		<models>
		    <gomage_adspromo>
		        <class>GoMage_Adspromo_Model</class>
		        <resourceModel>gomage_adspromo_mysql4</resourceModel>
		    </gomage_adspromo>
		    <gomage_adspromo_mysql4>
		        <class>GoMage_Adspromo_Model_Mysql4</class>
		        <entities>
		            <item>
                        <table>gomage_adspromo_entity</table>
		            </item>		            
		        </entities>
		    </gomage_adspromo_mysql4>
		</models>
		<blocks>
            <gomage_adspromo>
                <class>GoMage_Adspromo_Block</class>
            </gomage_adspromo>
        </blocks>
        <resources>
            <gomage_adspromo_setup>
                <setup>
                    <module>GoMage_Adspromo</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </gomage_adspromo_setup>
            <gomage_adspromo_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </gomage_adspromo_write>
            <gomage_adspromo_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </gomage_adspromo_read>
        </resources>
        <helpers>
			<gomage_adspromo><class>GoMage_Adspromo_Helper</class></gomage_adspromo>
		</helpers>
	</global>
    <default>
        <gomage_notification>
            <notification>
                <enable>1</enable>
            </notification>
        </gomage_notification>
	</default>
</config>